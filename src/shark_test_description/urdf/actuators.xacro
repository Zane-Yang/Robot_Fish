<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- 基于base.xacro的位置参数，配置5个鱼鳍（修复胸鳍关节锁死） -->
  
  <!-- 1. 胸鳍（fin0）：修正effort和velocity，避免锁死 -->
  <xacro:fin_macro 
      namespace="${namespace}" 
      fin_id="0" 
      parent_link="${namespace}/base_link" 
      mesh_file="package://shark_test_description/meshes/body_fin.STL"
      lower_limit="-0.52"        
      upper_limit="0.52" 
      effort="5.0"  
      velocity="2.0"  
      axis="0 1 0"
      mass="0.78" >  <!-- 绕y轴转动（上下摆动） -->
      <origin xyz="0 0 0" rpy="0 0 0" />
  </xacro:fin_macro>

  <!-- 2. 尾鳍link1（fin1）：保留原有参数 -->
  <xacro:fin_macro 
      namespace="${namespace}" 
      fin_id="1" 
      parent_link="${namespace}/base_link" 
      mesh_file="package://shark_test_description/meshes/link1.STL"
      lower_limit="-0.54777"     
      upper_limit="0.54777" 
      effort="5.0"               
      velocity="2.0" 
      axis="0 0 1"
      mass="0.28">  <!-- 绕z轴转动（左右摆动） -->
      
      <origin xyz="0.16952 -0.001 0.022" rpy="0 0 0" />
  </xacro:fin_macro>

  <!-- 3. 尾鳍link2（fin2）：保留原有参数 -->
  <xacro:fin_macro 
      namespace="${namespace}" 
      fin_id="2" 
      parent_link="${namespace}/fin1"  
      mesh_file="package://shark_test_description/meshes/link2.STL"
      lower_limit="-0.5242"      
      upper_limit="0.5242" 
      effort="5.0"               
      velocity="2.0" 
      axis="0 0 -1"
      mass="0.23" >  <!-- 绕z轴反向转动 -->
      
      <origin xyz="0.06502 0 0" rpy="0 0 0" />
  </xacro:fin_macro>

  <!-- 4. 尾鳍link3（fin3）：保留原有参数 -->
  <xacro:fin_macro 
      namespace="${namespace}" 
      fin_id="3" 
      parent_link="${namespace}/fin2"  
      mesh_file="package://shark_test_description/meshes/link3.STL"
      lower_limit="-0.424"       
      upper_limit="0.424" 
      effort="4.0"               
      velocity="1.5" 
      axis="0 0 1"
      mass="0.19" >
      <origin xyz="0.06402 0 0" rpy="0 0 0" />
  </xacro:fin_macro>

  <!-- 5. 尾鳍link4（fin4）：保留原有参数 -->
  <xacro:fin_macro 
      namespace="${namespace}" 
      fin_id="4" 
      parent_link="${namespace}/fin3"  
      mesh_file="package://shark_test_description/meshes/link4.STL"
      lower_limit="-0.265"       
      upper_limit="0.265" 
      effort="2.0"               
      velocity="1.0" 
      axis="0 0 -1"
      mass="0.11" >
      <origin xyz="0.0668 0 0" rpy="0 0 0" />
  </xacro:fin_macro>
</robot>
